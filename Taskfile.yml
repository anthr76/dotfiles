---
version: "3"

tasks:
  default:
    cmds:
      - task --list
  pretty:
    desc: fix errors
    cmds:
      - prettier --parser=markdown --write '*.md' '**/*.md' || true
      - prettier --parser=yaml --write '*.y*ml' '**/*.y*ml' || true
  install-fisher:
    preconditions:
     - bash: command -v "fish" >/dev/null 2>&1 ||
       msg: "fish isn't installed"
    desc: install fisher
    cmds:
      - type fisher &>/dev/null || curl -sL https://git.io/fisher | source && fisher install jorgebucaran/fisher
  install-fisher-third-party:
    desc: install fish third party plugins
    cmds:
      - fisher install danhper/fish-ssh-agent
      - fisher install decors/fish-colored-man
      - fisher install edc/bass
      - fisher install evanlucas/fish-kubectl-completions
      - fisher install franciscolourenco/done
      - fisher install jethrokuan/z
      - fisher install jorgebucaran/spark.fish
      - fisher install oh-my-fish/plugin-bang-bang
      - fisher install patrickf3139/fzf.fish
      - fisher install wfxr/forgit
  install-vim-plug:
    preconditions:
     - bash: command -v "curl" >/dev/null 2>&1 ||
       msg: "curl isn't installed"
    desc: install latest vundle
    cmds:
      - curl -fLo ~/.config/.nvim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  install-tpm:
    preconditions:
     - bash: command -v "git" >/dev/null 2>&1 ||
       msg: "git isn't installed"
    desc: install latest tpm
    cmds:
      - git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
      - tmux source-file ~/.tmux.conf
      - ~/.tmux/plugins/tpm/bin/install_plugins
  update-tpm:
    preconditions:
     - bash: command -v "tmux" >/dev/null 2>&1 ||
       msg: "git isn't installed"
    desc: update tpm and it's plugins
    cmds:
      - git -C ~/.tmux/plugins/tpm config pull.rebase true
      - git -C ~/.tmux/plugins/tpm pull
